<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Details Form</title>
  <link rel="stylesheet" href="stylesdetails.css">
  <script src="https://unpkg.com/alpinejs" defer></script>
  <script src="detailsjs.js"></script>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/css/intlTelInput.css">
  <script src="https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/js/intlTelInput.min.js"></script>

  
<!--Google Fonts-->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Lora&family=Playfair+Display:ital,wght@1,600&display=swap" rel="stylesheet">
</head>

<body>

    <header>

        <div class="content flex_space">
            <div class="logo">
                <h1 class="logo-text"><span class="logspan">Turtle </span>Terrace</h1>
            </div>
            <div class="navlinks">
                <ul id="menulist">
                    <li><a href="index.html">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#rooms">Rooms</a></li>
                    <li><a href="#pages">Pages</a></li>
                    <li><a href="#news">News</a></li>
                    <li><a href="#contact">Contact</a></li>
                    <li><i class="fa fa-search"></i></li>
                    <li><button class="primary-btn">BOOK NOW</button></li>
                </ul>
                <span class="fa fa-bars"></span>
            </div>
        </div>
    </header>
<div class="main-grid-container">
    <div class="grid-container-left">
        <br>
        <h1>Enter your details:</h1>
<div x-data="getDetailsData()" class="grid-container">
<form x-on:submit.prevent="gotoPayment">
  <div class="container">

    <label for="fullName">Full Name</label>
    <input type="text" name="fullName" id="fullName" x-model="details.fullName" required>

    </div><br>

<div class="container">

    <label for="mobile">Mobile</label>
    <input type="tel" name="mobile" id="mobile" x-model="details.mobile" required>

</div>
<br>
    <div class="container">
      <label for="email">Email:</label>
      <input type="email" name="email" id="email" x-model="details.email" required>
    </div><br>

    <div class="container">
      <label for="confirm-email">Confirm Email:</label>
      <input type="email" name="email" id="email" x-model="details.email" required>
    </div><br>

    <div class="container">
    <label for="gender">Gender</label>
    <select type="gender" name="gender" id="gender" x-model="details.gender" required>
        <option value="male">Male</option>
        <option value="female">Female</option>
    </select>

    </div>

    <div>
    <button id="submit-btn">
        <a href="paymentpage.html">Submit</a>
    </button>
    </div>
</div>
</div>
<div class="grid-container-right">
</form>
<span x-text="JSON.stringify(details)"></span>


<div class="container2">
  <h1>Order Summary</h1>

  <!--Summary Table-->

  <table border="3">
    <tr>
        <th>Date</th>
        <td>Column 2</th>
    </tr>
    <tr>
        <th>Time</th>
        <td>Row 1, Column 2</td>
    </tr>
    <tr>
        <th>Duration</th>
        <td>Row 2, Column 2</td>
    </tr>
    <tr>
        <th>Tickets</th>
        <th>Charges</th>
    </tr>
    <tr>
        <th>SL Adult</th>
        <td>Row 4, Column 2</td>
    </tr>
    <tr>
        <th>SL Child</th>
        <td>Row 5, Column 2</td>
    </tr>
    <tr>
        <th>Foreigner Adult</th>
        <td>Row 6, Column 2</td>
    </tr>
    <tr>
        <th>Foreigner Child</th>
        <td>Row 7, Column 2</td>
    </tr>
    <tr>
        <th>Infant</th>
        <td>Row 8, Column 2</td>
    </tr>
    <tr>
        <th>Total Payable</th>
        <td>Row 9, Column 2</td>
    </tr>
</table>
<p>Date: <span id="date"></span></p>
<p>Selected Time Slots: <span id="selectedTimeSlots"></span></p>
<p>Ticket Types: <span id="ticketTypes"></span></p>
<p>Grand Total: <span id="grandTotal"></span></p>
</div>
</div>

</div>


  <script>
        document.addEventListener('alpine:init', () => {
            Alpine.data('details', () => ({
                details: {
                    fullName: '',
                    mobile: '',
                    email: '',
                    gender: ''
                },
                init() {
                    const input = document.querySelector("#mobile");
                    window.intlTelInput(input, {
                        utilsScript: "https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/js/utils.js",
                    });
                },
                gotoPayment() {
                    // set the guest data to local storage
                    localStorage.setItem('details', JSON.stringify(this.details))

                    // redirect to payment page
                    window.location.href = 'payment.html'
                }
            }))
        })
        document.addEventListener('DOMContentLoaded', () => {
            const detailsDataDiv = document.getElementById('ticketsData');

            // Retrieve the stored data from local storage
            const date = localStorage.getItem('date');
            const selectedDate = localStorage.getItem('selectedDate');
            const grandTotal = localStorage.getItem('grandTotal');
            const ticketTypes = JSON.parse(localStorage.getItem('ticketTypes'));
            const selectedTimeSlots = JSON.parse(localStorage.getItem('selectedTimeSlots'));

            // Display the data in the checkoutDataDiv
            detailsDataDiv.innerHTML = `
                <h2>Date: ${date}</h2>
                <h3>Selected Date: ${selectedDate}</h3>
                <h3>Grand Total: ${grandTotal} USD</h3>
                <h3>Selected Time Slots: ${selectedTimeSlots.join(', ')}</h3>
                <h3>Ticket Types:</h3>
                <ul>
                    ${ticketTypes.map(ticketType => `<li>${ticketType.name}: ${ticketType.count}</li>`).join('')}
                </ul>
            `;

            // Clear the stored data from local storage after displaying it
            localStorage.removeItem('date');
            localStorage.removeItem('selectedDate');
            localStorage.removeItem('grandTotal');
            localStorage.removeItem('ticketTypes');
            localStorage.removeItem('selectedTimeSlots');
        });



        document.getElementById('submit-btn').addEventListener('click', function() {
    const fullName = document.getElementById('full-name').value;
    const countryCode = document.getElementById('country-code').value;
    const mobileNumber = document.getElementById('mobile-number').value;
    const email = document.getElementById('email').value;
    const confirmEmail = document.getElementById('confirm-email').value;
  
    // Storing values in local storage
    localStorage.setItem('fullName', fullName);
    localStorage.setItem('countryCode', countryCode);
    localStorage.setItem('mobileNumber', mobileNumber);
    localStorage.setItem('email', email);
    localStorage.setItem('confirmEmail', confirmEmail);
  
    alert('Values stored in local storage.');


  document.addEventListener('DOMContentLoaded', () => {
    const storedDetails = localStorage.getItem('details');
    if (storedDetails){
        const detailsData = JSON.parse(storedDetails);
        const fullNameInput = document.getElementById('fullName');
    }
    const date = JSON.parse(localStorage.getItem('purchaseDate'));
    const selectedTimeSlots = JSON.parse(localStorage.getItem('selectedTimeSlots'));
    const ticketTypes = JSON.parse(localStorage.getItem('ticketTypes'));
    const grandTotal = localStorage.getItem('grandTotal');
  
 
    console.log('Selected Date:', date);
    console.log('Selected Time Slots:', selectedTimeSlots);
    console.log('Ticket Types:', ticketTypes);
    console.log('Grand Total:', grandTotal);
  })
});

document.addEventListener('DOMContentLoaded', () => {
  const dateElement = document.getElementById('date');
  const selectedTimeSlotsElement = document.getElementById('selectedTimeSlots');
  const grandTotalElement = document.getElementById('grandTotal');

  const date = JSON.parse(localStorage.getItem('purchaseDate'));
  const selectedTimeSlots = JSON.parse(localStorage.getItem('selectedTimeSlots'));
  const ticketTypes = JSON.parse(localStorage.getItem('ticketTypes'));
  const grandTotal = localStorage.getItem('grandTotal');

  // Display the retrieved data on the page
  dateElement.textContent = date;
  selectedTimeSlotsElement.textContent = selectedTimeSlots.join(', '); // Convert array to a comma-separated string
  grandTotalElement.textContent = grandTotal;

  // Optionally, you can also display the ticket count and other details if needed
});

  </script>





</body>
</html>